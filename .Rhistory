library(tidyverse)  # library for dealing with tabular data
library(lubridate)  # library for handling dates
data = read_csv(here::here("sfpark", "data", "sfpark.csv"))
data = read_csv(here::here("sfpark", "data", "sfpark.csv"))
setwd("~/Documents/plan372/plan372-exercises/sfpark")
data = read_csv(here::here("sfpark", "data", "sfpark.csv"))
data = read_csv("sfpark", "data", "sfpark.csv")
data = read_csv("data", "sfpark.csv")
data = read_csv("data/sfpark.csv")
head(data)
unique(data$facility)
unique(data$district)
mean(data$entries)
median(data$entries)
data |>
group_by(facility) |>
summarize(mean_entries=mean(entries)) |>
ungroup()
total_entries = data |>
group_by(date, facility) |>
summarize(entries=sum(entries), exits=sum(exits)) |>
ungroup()
head(total_entries)
civic_center_data = data |> filter(district == "Civic Center")
total_entries
civic_center_data = data |> filter(district == "Civic Center")
civic_center_data = data |> filter(district == "Civic Center")
civic_center_data.show
civic_center_data = data |> filter(district == "Civic Center")
civic_center_data()
civic_center_data = data |> filter(district == "Civic Center")
total_entries |>
group_by(facility) |>
summarize(mean_entries=mean(entries)) |>
ungroup()
# load a dataset built-in to R - Motor Trend car tests
data("mtcars")
data("mtcars")
mean(mtcars$mpg)
civic_center_data = data |> filter(district == "Civic Center")
total_entries_cc = civic_center_data |>
group_by(date, facility) |>
summarize(entries=sum(entries)) %>%
ungroup()
mission_data = data %>% filter(district = "Mission")
mission_data = data %>% filter(district == "Mission")
mission_total_entries = mission_data %>%
group_by(facility, date) %>%
summarize (entries=sum(entries)) %>%
ungroup()
mission_total_entries %>%
group_by(facility) %>%
summarize(entries=mean(entries)) %>%
ungroup()
mission_data = data %>% filter(district == "Mission")
mission_total_entries = mission_data %>%
group_by(facility, date) %>%
summarize (entries=sum(entries)) %>%
ungroup()
mission_total_entries %>%
group_by(facility) %>%
summarize(entries=mean(entries)) %>%
ungroup()
total_entries
total_entries = total_entries |> mutate(date=mdy(date))
total_entries$year = year(total_entries$date)
total_entries$year = year(total_entries$date)
# make sure it worked (note: any text after a # sign within R code is ignored by R; this is called a comment)
unique(total_entries$year)
total_entries |>
group_by(facility, year) |>
summarize(entries=mean(entries)) |>
ungroup() |>
pivot_wider(names_from=year, values_from=entries)
total_entries$day_of_week = wday(total_entries$date, label=T)
unique(total_entries$day_of_week)
total_entries$weekend = recode(total_entries$day_of_week, "Mon"="weekday", "Tue"="weekday", "Wed"="weekday", "Thu"="weekday",
"Fri"="weekday", "Sat"="weekend", "Sun"="weekend")
stopifnot(!any(is.na(total_entries$weekend)))
total_entries |>
group_by(facility, weekend) |>
summarize(entries=mean(entries)) |>
ungroup() |>
pivot_wider(names_from=weekend, values_from=entries)
citywide_entries = total_entries |>
group_by(date) |>
summarize(entries=sum(entries)) |>
ungroup()
ggplot(citywide_entries, aes(x=date, y=entries)) +
# and add a line plot to it
geom_line()
knitr::opts_chunk$set(echo = TRUE)
install.packages("openxlsx")
library(tidyverse)
library(readxl)
library(readxl)
Salary_Data_Export <- read_excel("~/Desktop/Salary Data Export.xlsx")
View(Salary_Data_Export)
getwd()
getwd()
setwd("/Users/abbypender/Desktop")
getwd()
setwd("/Users/abbypender/Desktop")
getwd()
getwd()
setwd("/Users/abbypender/Desktop")
read_excel("/Users/abbypender/Desktop/Salary Data Export.xlsx")
library(tidyverse)
library(readxl)
library(dplyr)
getwd()
setwd("/Users/abbypender/Desktop")
salary_data <- read_excel("/Users/abbypender/Desktop/Salary Data Export.xlsx")
getwd()
setwd("/Users/abbypender/Desktop")
salary_data <- read_excel("/Users/abbypender/Desktop/Salary Data Export.xlsx")
salary_data()
getwd()
setwd("/Users/abbypender/Desktop")
salary_data = read_excel("/Users/abbypender/Desktop/Salary Data Export.xlsx")
keywords <- c("Diversity", "inclusion", "Equal", "Equity", "Excellence")
filtered_DEI_data <- salary_data %>% filter(grepl(paste(keywords, collapse = "|"), 'JOB CATEGORY', ignore.case= TRUE))
keywords <- c("Diversity", "inclusion", "Equal", "Equity", "Excellence")
filtered_DEI_data <- salary_data %>% filter(grepl(paste(keywords, collapse = "|"), 'JOB CATEGORY', ignore.case= TRUE))
filtered_DEI_data
View(filtered_DEI_data)
keywords <- c("Diversity")
filtered_DEI_data <- salary_data %>% filter(grepl(paste(keywords, collapse = "|"), 'JOB CATEGORY', ignore.case= TRUE))
filtered_DEI_data
citywide_entries = total_entries |>
group_by(date) |>
summarize(entries=sum(entries)) |>
ungroup()
citywide_entries$month_year = floor_date(citywide_entries$date, unit="month")
monthly_entries = citywide_entries |>
group_by(month_year) |>
summarize(entries=sum(entries)) |>
ungroup()
ggplot(monthly_entries, aes(x=month_year, y=entries)) +
geom_line()
total_entries$year_month = floor_date(total_entries$date, unit="month")
garage_month_entries = total_entries |>
group_by(facility, year_month) |>
summarize(entries=sum(entries)) |>
ungroup()
head(garage_month_entries)
ggplot(garage_month_entries, aes(x=year_month, y=entries, group=facility, color=facility)) +
geom_line()
total_entries$year_week = floor_date(total_entries$date, unit="week")
garage_week_entries = total_entries |>
group_by(facility, year_week) |>
summarize(entries=sum(entries)) |>
ungroup()
head(garage_week_entries)
ggplot(garage_week_entries, aes(x=year_month, y=entries, group=facility, color=facility)) +
geom_line()
ggplot(garage_week_entries, aes(x=year_week, y=entries, group=facility, color=facility)) +
geom_line()
total_entries$week = floor_date(total_entries$date, unit="week")
garage_week_entries = total_entries |>
group_by(facility, week) |>
summarize(entries=sum(entries)) |>
ungroup()
ggplot(garage_week_entries, aes(x=week, y=entries, group=facility, color=facility)) +
geom_line()
total_entries$week = floor_date(total_entries$date, unit="week")
garage_week_entries = total_entries |>
group_by(district, week) |>
summarize(entries=sum(entries)) |>
ungroup()
View(total_entries_cc)
View(total_entries)
View(monthly_entries)
View(garage_week_entries)
View(garage_month_entries)
View(citywide_entries)
View(civic_center_data)
data$week = floor_date(data$date, unit = "week")
data$date = mdy(data$date)
data$week = floor_date(data$date, unit = "week")
district_week_entries = data %>%
group_by(week, district) %>%
summarize(entries = sum(entries)) %>%
ungroup()
ggplot(district_week_entries, aes(x=week, y=entries, group=facility, color=facility)) +
geom_line()
data$week = floor_date(data$date, unit = "week")
district_week_entries = data %>%
group_by(week, district) %>%
summarize(entries = sum(entries)) %>%
ungroup()
ggplot(district_week_entries, aes(x=week, y=entries, group=district, color=district)) +
geom_line()
View(data)
unique(data$usage_type)
data |>
group_by(usage_type) |>
summarize(mean_entries=mean(entries)) |>
ungroup()
data |>
group_by(usage_type) |>
summarize(mean_entries=total(entries)) |>
ungroup()
data |>
group_by(usage_type) |>
summarize(mean_entries=mean(entries)) |>
ungroup()
data |>
group_by(usage_type) |>
summarize(sum_entries=sum(entries)) |>
ungroup()
data$day_of_week = wday(data$date, label = T)
data$weekend = recode(data$day_of_week, "Mon"="weekday", "Tue"="weekday", "Wed"="weekday", "Thu"="weekday",
"Fri"="weekday", "Sat"="weekend", "Sun"="weekend")
data %>%
group_by(weekend, usage_type) %>%
summarize(entries=sum(entries)) %>%
ungroup() %>%
pivot_wider(names_from="weekend", values_from = "entries")
